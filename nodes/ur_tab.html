<script type="text/javascript">
    //convert to i18 text
    function c_ur_tab(x) {
        return RED._('unified-red/ur_tab:ur_tab.' + x);
    }

    RED.nodes.registerType('ur_tab', {
        category: 'config',
        defaults: {
            name: { value: c_ur_tab('label.default') },
            order: { value: 0 },
            group: { type: 'ur_group', required: true },
        },
        sort: function (A, B) {
            if (A.group !== B.group) {
                var groupA = RED.nodes.node(A.group);
                var groupB = RED.nodes.node(B.group);
                if (!groupA && groupB) {
                    return -1;
                } else if (groupA && !groupB) {
                    return 1;
                } else {
                    return groupA.order - groupB.order;
                }
            }
            return A.order - B.order;
        },
        paletteLabel: 'dashboard tab',
        label: function () {
            var groupNode = RED.nodes.node(this.group);
            var pageNode = groupNode !== null ? RED.nodes.node(groupNode.page) : null;
            var folderNode = pageNode !== null ? RED.nodes.node(pageNode.folder) : null;
            var groupName = groupNode ? groupNode.name : 'label.unassigned';
            var pageName = pageNode ? pageNode.name : 'label.unassigned';
            var folderName = folderNode ? folderNode.name : 'label.unassigned';

            return (
                '[' +
                (folderName || c_ur_tab('label.folder')) +
                '] [' +
                (pageName || c_ur_tab('label.page')) +
                '] [' +
                (groupName || c_ur_tab('label.group')) +
                '] ' +
                (this.name || c_ur_tab('label.tab'))
            );
        },
    });
</script>

<script type="text/html" data-template-name="ur_tab">
    <div class="form-row">
        <label for="node-config-input-name"
            ><i class="fa fa-tag"></i> <span data-i18n="ur_tab.label.name"></span
        ></label>
        <input type="text" id="node-config-input-name" />
    </div>
    <div class="form-row">
        <label for="node-config-input-group"
            ><i class="fa fa-window-maximize"></i> <span data-i18n="ur_tab.label.group"></span
        ></label>
        <input type="text" id="node-config-input-group" />
    </div>
</script>

<script type="text/html" data-help-name="ur_tab">
    <p>Tab</p>
</script>
